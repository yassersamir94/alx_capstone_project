{"version":3,"file":"list.js","names":["_block","_interopRequireDefault","require","_container","_quill","obj","__esModule","default","ListContainer","Container","exports","blotName","tagName","ListItem","Block","create","value","node","setAttribute","formats","domNode","getAttribute","undefined","register","Quill","constructor","scroll","ui","ownerDocument","createElement","listEventHandler","e","isEnabled","format","statics","preventDefault","addEventListener","attachUI","name","allowedChildren","requiredContainer"],"sources":["../../src/formats/list.ts"],"sourcesContent":["import Block from '../blots/block';\nimport Container from '../blots/container';\nimport type Scroll from '../blots/scroll';\nimport Quill from '../core/quill';\n\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends Block {\n  static create(value: string) {\n    // @ts-expect-error\n    const node = super.create() as Element;\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    Quill.register(ListContainer);\n  }\n\n  constructor(scroll: Scroll, domNode: HTMLElement) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = (e: Event) => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n\n  format(name: string, value: string) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\n\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\nexport { ListContainer, ListItem as default };\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAkC,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAElC,MAAMG,aAAa,SAASC,kBAAS,CAAC;AAAEC,OAAA,CAAAF,aAAA,GAAAA,aAAA;AACxCA,aAAa,CAACG,QAAQ,GAAG,gBAAgB;AACzCH,aAAa,CAACI,OAAO,GAAG,IAAI;AAE5B,MAAMC,QAAQ,SAASC,cAAK,CAAC;EAC3B,OAAOC,MAAMA,CAACC,KAAa,EAAE;IAC3B;IACA,MAAMC,IAAI,GAAG,KAAK,CAACF,MAAM,CAAC,CAAY;IACtCE,IAAI,CAACC,YAAY,CAAC,WAAW,EAAEF,KAAK,CAAC;IACrC,OAAOC,IAAI;EACb;EAEA,OAAOE,OAAOA,CAACC,OAAoB,EAAE;IACnC,OAAOA,OAAO,CAACC,YAAY,CAAC,WAAW,CAAC,IAAIC,SAAS;EACvD;EAEA,OAAOC,QAAQA,CAAA,EAAG;IAChBC,cAAK,CAACD,QAAQ,CAACf,aAAa,CAAC;EAC/B;EAEAiB,WAAWA,CAACC,MAAc,EAAEN,OAAoB,EAAE;IAChD,KAAK,CAACM,MAAM,EAAEN,OAAO,CAAC;IACtB,MAAMO,EAAE,GAAGP,OAAO,CAACQ,aAAa,CAACC,aAAa,CAAC,MAAM,CAAC;IACtD,MAAMC,gBAAgB,GAAIC,CAAQ,IAAK;MACrC,IAAI,CAACL,MAAM,CAACM,SAAS,CAAC,CAAC,EAAE;MACzB,MAAMC,MAAM,GAAG,IAAI,CAACC,OAAO,CAACf,OAAO,CAACC,OAAO,EAAEM,MAAM,CAAC;MACpD,IAAIO,MAAM,KAAK,SAAS,EAAE;QACxB,IAAI,CAACA,MAAM,CAAC,MAAM,EAAE,WAAW,CAAC;QAChCF,CAAC,CAACI,cAAc,CAAC,CAAC;MACpB,CAAC,MAAM,IAAIF,MAAM,KAAK,WAAW,EAAE;QACjC,IAAI,CAACA,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC;QAC9BF,CAAC,CAACI,cAAc,CAAC,CAAC;MACpB;IACF,CAAC;IACDR,EAAE,CAACS,gBAAgB,CAAC,WAAW,EAAEN,gBAAgB,CAAC;IAClDH,EAAE,CAACS,gBAAgB,CAAC,YAAY,EAAEN,gBAAgB,CAAC;IACnD,IAAI,CAACO,QAAQ,CAACV,EAAE,CAAC;EACnB;EAEAM,MAAMA,CAACK,IAAY,EAAEtB,KAAa,EAAE;IAClC,IAAIsB,IAAI,KAAK,IAAI,CAACJ,OAAO,CAACvB,QAAQ,IAAIK,KAAK,EAAE;MAC3C,IAAI,CAACI,OAAO,CAACF,YAAY,CAAC,WAAW,EAAEF,KAAK,CAAC;IAC/C,CAAC,MAAM;MACL,KAAK,CAACiB,MAAM,CAACK,IAAI,EAAEtB,KAAK,CAAC;IAC3B;EACF;AACF;AAACN,OAAA,CAAAH,OAAA,GAAAM,QAAA;AACDA,QAAQ,CAACF,QAAQ,GAAG,MAAM;AAC1BE,QAAQ,CAACD,OAAO,GAAG,IAAI;AAEvBJ,aAAa,CAAC+B,eAAe,GAAG,CAAC1B,QAAQ,CAAC;AAC1CA,QAAQ,CAAC2B,iBAAiB,GAAGhC,aAAa"}